var jTwiTopic={verticalTweetNumber:3,width:"600px",slideShowTime:1E4,refreshTime:12E4,slideShowOpacity:1,topic:null,options:null,container:null,shownElement:0,numElements:0,results:null,slideShowInterval:0,orientation:"horizontal",request:function(a,b){if(a)if(b.container){b.container?jTwiTopic.container=b.container:jTwiTopic.container=null;b.width?jTwiTopic.width=b.width:jTwiTopic.width=jTwiTopic.width;b.rpp?rpp=b.rpp:rpp="25";b.result_type?result_type=b.result_type:result_type="";b.lang?lang=b.lang:
lang="all";b.tweetsNumber?jTwiTopic.verticalTweetNumber=b.tweetsNumber:jTwiTopic.verticalTweetNumber=1;b.since?since=b.since:since="";b.geocode?geocode=b.geocode:geocode="";b.until?until=b.until:until="";jTwiTopic.topic=a;jTwiTopic.options=b;$("#"+jTwiTopic.container).css({"-moz-border-radius-bottomleft":"5px","-moz-border-radius-bottomright":"5px","border-radius-bottomleft":"5px","border-radius-bottomright":"5px","-webkit-border-bottom-left-radius":"5px","-webkit-border-bottom-right-radius":"5px"});
var c="http://search.twitter.com/search.json?q="+encodeURIComponent(a)+"&callback=jTwiTopic.gogogo&result_type="+result_type+"&rpp="+rpp+"&lang="+lang+"&since="+since+"&geocode="+geocode+"&until="+until;$("head").append($("<script>").attr({src:c}))}else document.write("jTwiTopic: specify a container (i.e. a div element)");else document.write("jTwiTopic: specify a topic")},refresh:function(){jTwiTopic.request(jTwiTopic.topic,jTwiTopic.options);jTwiTopic.shownElement=0},gogogo:function(a){if(jTwiTopic.results!==
a){jTwiTopic.results=a;var b=$("#"+jTwiTopic.container).addClass("jtt-container").css({opacity:jTwiTopic.slideShowOpacity,width:jTwiTopic.width}).text(""),c=$("<ul>").addClass("jtt-ul");b.unbind().hover(function(){$(".jtt-up").fadeIn();clearInterval(jTwiTopic.slideShowInterval)},function(){$(".jtt-up").fadeOut();clearInterval(jTwiTopic.slideShowInterval);jTwiTopic.slideShowInterval=setInterval("jTwiTopic.showNext()",jTwiTopic.slideShowTime)});if(a.error)b.css({height:"60px"}),c.append($("<li>").addClass("jtt-li").css({margin:"0px",
color:"black"}).text("Error: "+a.error)),b.append(c),jTwiTopic.appendHeader(),clearInterval(jTwiTopic.slideShowInterval);else if(a.results){for(var d=0;d<a.results.length;d++)c.append($("<li>").attr({id:"element"+d}).addClass("jtt-li").css({"padding-top":"5px","padding-bottom":"5px","padding-left":"5px"}).append($("<a>").attr({href:"http://www.twitter.com/"+a.results[d].from_user,title:a.results[d].from_user,target:"_blank"}).addClass("jtt-img").css({background:"url("+a.results[d].profile_image_url+
")"})).append($("<div>").addClass("jtt-user").text(a.results[d].from_user)).append($("<div>").addClass("jtt-text").html(replaceText(a.results[d].text)).append($("<span>").addClass("jtt-date").html("<a href='http://www.twitter.com/"+a.results[d].from_user+"/status/"+a.results[d].id+"' target='_blank'>"+prettyDate(a.results[d].created_at)+"</a> via "+$("<div/>").html(a.results[d].source).text()+" :: <a title='Reply to "+a.results[d].from_user+"' href='http://twitter.com/?status=@"+a.results[d].from_user+
"&in_reply_to_status_id="+a.results[d].id+"&in_reply_to="+a.results[d].from_user+"' target='_blank'>Reply</a>"))));jTwiTopic.numElements=a.results.length;b.append(c);var e=jTwiTopic.getMaxLiHeight();b.css({height:e*jTwiTopic.verticalTweetNumber+10*jTwiTopic.verticalTweetNumber});$(".jtt-li").each(function(a,b){$(b).css({height:e})});jTwiTopic.appendHeader();b.append($("<div>").addClass("jtt-up").text("Up").css({top:$(".jtt-header").offset().top+$(".jtt-header").outerHeight(),width:c.width()-5}).click(function(){jTwiTopic.showNext()}));
b.append($("<div>").addClass("jtt-up").text("Down").css({top:$(".jtt-header").offset().top+$("#"+jTwiTopic.container).outerHeight()+17,width:c.width()-5}).click(function(){jTwiTopic.showPrev()}));-1!==navigator.userAgent.indexOf("Opera")&&($(".jtt-li").css("background-color","#EBF2F5"),$(".jtt-header").css("background-color","#1F5F8F"));clearInterval(jTwiTopic.slideShowInterval);jTwiTopic.slideShowInterval=setInterval("jTwiTopic.showNext()",jTwiTopic.slideShowTime);clearInterval(jTwiTopic.refreshInterval);
jTwiTopic.refreshInterval=setInterval("jTwiTopic.refresh()",jTwiTopic.refreshTime)}else b.css({height:"60px"}),c.append($("<li>").addClass("jtt-li").css({margin:"0px",color:"black"}).text("No results for topic: "+jTwiTopic.topic)),b.append(c),jTwiTopic.appendHeader(),clearInterval(jTwiTopic.slideShowInterval)}},appendHeader:function(){if(0==$(".jtt-header").size()){var a=$("#"+jTwiTopic.container);$("<div>").addClass("jtt-header").css({"margin-left":"0px",padding:"10px",position:"relative"}).append($("<span>").css("text-align",
"left").text("jTwiTopic: "+jTwiTopic.topic)).css({width:$(".jtt-ul").outerWidth()-20,"margin-top":$(a).css("margin-top")}).insertBefore($(a));$(a).css("margin-top","0px")}},showNext:function(){jTwiTopic.shownElement==jTwiTopic.numElements-1?($(".jtt-li").animate({opacity:0},500,function(){$($(".jtt-ul").get(0)).animate({marginTop:"0"},0,function(){$(".jtt-li").animate({opacity:1},500,function(){})})}),jTwiTopic.shownElement=0):(jTwiTopic.shownElement++,$($(".jtt-ul").get(0)).animate({marginTop:"-="+
(jTwiTopic.getMaxLiHeight()+11)},500,function(){}))},showPrev:function(){0==jTwiTopic.shownElement?($(".jtt-li").animate({opacity:0},500,function(){$($(".jtt-ul").get(0)).animate({marginTop:"-"+(jTwiTopic.numElements-1)*(jTwiTopic.getMaxLiHeight()+10)+"px"},0,function(){$(".jtt-li").animate({opacity:1},500,function(){})})}),jTwiTopic.shownElement=jTwiTopic.numElements-1):(jTwiTopic.shownElement--,$($(".jtt-ul").get(0)).animate({marginTop:"+="+(jTwiTopic.getMaxLiHeight()+10)},500,function(){}))},getMaxLiHeight:function(){var a=
0;$(".jtt-li").each(function(b,c){$(c).height()>a&&(a=$(c).height())});return a}};
function replaceText(a){var b=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,b=a.replace(b,"<a href='$1' target='_blank'>$1</a>"),b=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,b=a.replace(b,"<a href='$1' target='_blank'>$1</a>");if(a=b.match(/@\w*/ig))for(var c=0;c<a.length;c++)b=b.replace(a[c],"<a href='http://www.twitter.com/"+a[c].toString().replace("@","")+"' target='_blank'>"+a[c]+"</a>");if(a=b.match(/#\w*/ig))for(c=0;c<a.length;c++)b=
b.replace(a[c],"<a href='http://twitter.com/search?q=%23"+a[c].toString().replace("#","")+"' target='_blank'>"+a[c]+"</a>");return b}function prettyDate(a){var a=new Date(a||""),a=((new Date).getTime()-a.getTime())/1E3,b=Math.floor(a/86400);return isNaN(b)||0>b||31<=b?"":0==b&&(60>a&&"just now"||120>a&&"1 minute ago"||3600>a&&Math.floor(a/60)+" minutes ago"||7200>a&&"1 hour ago"||86400>a&&Math.floor(a/3600)+" hours ago")||1==b&&"Yesterday"||7>b&&b+" days ago"||31>b&&Math.ceil(b/7)+" weeks ago"}
"undefined"!=typeof jQuery&&(jQuery.fn.prettyDate=function(){return this.each(function(){var a=prettyDate(this.title);a&&jQuery(this).text(a)})});
